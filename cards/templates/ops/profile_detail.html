{% extends "ops/base.html" %}

{% block content %}
<h3 class="text-2xl font-semibold">Profile: {{ profile.customer.full_name }}</h3>
<div class="mt-6 grid gap-4 md:grid-cols-2">
    <div class="rounded-2xl border border-tt-border bg-tt-panel/80 p-6">
        <p class="text-sm"><span class="text-tt-muted">Code:</span> {{ profile.code }}</p>
        <p class="mt-2 text-sm"><span class="text-tt-muted">Slug:</span> {{ profile.slug }}</p>
        <p class="mt-2 text-sm"><span class="text-tt-muted">Status:</span> {{ profile.get_status_display }}</p>
        <p class="mt-2 text-sm"><span class="text-tt-muted">Template:</span> {{ profile.get_template_key_display }}</p>
        <p class="mt-2 text-sm"><span class="text-tt-muted">Expires:</span> {{ profile.hosting_expires_at|date:"M d, Y" }}</p>
        <p class="mt-2 text-sm"><span class="text-tt-muted">Edits remaining:</span> {% if edits_remaining is None %}Unlimited{% else %}{{ edits_remaining }}{% endif %}</p>
        <div class="mt-4 flex flex-wrap gap-2">
            <a class="rounded-full bg-tt-accent px-4 py-2 text-xs font-semibold text-slate-950" href="/admin/profiles/{{ profile.id }}/edit/">Edit profile</a>
            <a class="rounded-full border border-tt-border px-4 py-2 text-xs font-semibold text-slate-100 hover:border-tt-accent hover:text-tt-accent" href="{{ profile.public_url }}" target="_blank">Public link</a>
            <a class="rounded-full border border-tt-border px-4 py-2 text-xs font-semibold text-slate-100 hover:border-tt-accent hover:text-tt-accent" href="/c/{{ profile.code }}/card.vcf">vCard</a>
        </div>
    </div>
    <div class="rounded-2xl border border-tt-border bg-tt-panel/80 p-6">
        <div class="text-xs uppercase tracking-[0.2em] text-tt-muted">Recent edits</div>
        <div class="mt-4 space-y-3">
            {% for log in edit_logs %}
            <div class="rounded-xl border border-tt-border/60 bg-tt-card px-3 py-3">
                <div class="text-sm font-semibold">{{ log.get_edit_type_display }}</div>
                <div class="text-xs text-tt-muted">{{ log.created_at|date:"M d, Y H:i" }}</div>
                <div class="mt-1 text-sm text-tt-muted">{{ log.summary }}</div>
            </div>
            {% empty %}
            <div class="text-sm text-tt-muted">No edits yet.</div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
